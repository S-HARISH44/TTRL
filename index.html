<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0, maximum-scale=1.0, user-scalable=no">
    <meta name="description" content="Turbo Tribe Racing League - Elite F1 25 Sim Racing Competition">
    <title>TTRL | Racing League</title>
    
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500&family=JetBrains+Mono:wght@400;700&family=Rajdhani:wght@500;600;700;800&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.2/css/all.min.css" />

    <style>
        :root {
            --bg-main: #000000; /* UPDATED to pure black */
            --accent-red: #ff1f4b;
            --accent-cyan: #00f0ff;
            --text-primary: #ffffff;
        }

        * { margin: 0; padding: 0; box-sizing: border-box; }
        
        /* FIX: Lock viewport to prevent scrollbars and bars */
        html, body {
            width: 100%;
            height: 100%;
            margin: 0;
            padding: 0;
            background-color: var(--bg-main); /* Base color */
            font-family: 'Inter', sans-serif;
            color: var(--text-primary);
            overflow: hidden; /* Lock native scroll */
            overscroll-behavior: none; /* Prevent rubber-banding */
            scrollbar-width: none; /* Firefox */
            /* position: fixed; */ /* REVERTED: No longer needed with crossfade */
        }
        body::-webkit-scrollbar { display: none; /* Chrome/Safari */ }


        /* --- CINEMATIC OVERLAYS --- */
        .cinematic-grain {
            position: fixed; inset: 0; pointer-events: none; z-index: 999;
            background-image: url("data:image/svg+xml,%3Csvg viewBox='0 0 400 400' xmlns='http://www.w3.org/2000/svg'%3E%3Cfilter id='noiseFilter'%3E%3CfeTurbulence type='fractalNoise' baseFrequency='0.9' numOctaves='3' stitchTiles='stitch'/%3E%3C/filter%3E%3Crect width='100%25' height='100%25' filter='url(%23noiseFilter)'/%3E%3C/svg%3E");
            opacity: 0.05; mix-blend-mode: screen;
        }

        /* --- TYPOGRAPHY --- */
        .tech-font { font-family: 'Rajdhani', sans-serif; text-transform: uppercase; line-height: 0.9; }
        .mono-font { font-family: 'JetBrains Mono', monospace; }
        .char { display: inline-block; white-space: pre; will-change: transform, opacity; }

        /* --- FIXED UI --- */
        .fixed-ui {
            position: fixed; top: 0; left: 0; width: 100%; z-index: 100;
            padding: 1.5rem 2rem; display: flex; justify-content: space-between; align-items: center;
            pointer-events: none;
        }
        .logo { height: 3rem; width: auto; pointer-events: auto; filter: drop-shadow(0 2px 10px rgba(0,0,0,0.5)); }
        .nav-dots {
            position: fixed; right: 2rem; top: 50%; transform: translateY(-50%);
            z-index: 100; display: flex; flex-direction: column; gap: 1rem;
        }
        .dot {
            width: 6px; height: 6px; background: rgba(255,255,255,0.2); border-radius: 50%;
            transition: all 0.3s ease; cursor: pointer;
        }
        .dot.active { background: var(--accent-red); transform: scale(1.5); }

        /* --- SLIDE STRUCTURE --- */
        .slides-wrapper { 
            position: fixed; 
            inset: 0; /* REVERTED: Back to 0 */
            width: 100%; 
            height: 100%;
        }
        .slide {
            position: absolute; inset: 0; width: 100%; height: 100%;
            display: flex; align-items: center; justify-content: center;
            visibility: hidden; overflow: hidden;
            opacity: 0; /* NEW: Slides start invisible */
        }
        .slide.active { visibility: visible; z-index: 10; opacity: 1; }

        .slide-bg {
            position: absolute; inset: 0; z-index: 1;
            background-size: cover; background-position: center;
            filter: brightness(0.4) grayscale(0.1);
            transform: scale(1.1); will-change: transform;
        }
        /* Ensure Vanta canvas fits perfectly */
        #vanta-bg {
            filter: brightness(1) grayscale(0); /* Vanta doesn't need double filtering */
        }
        #vanta-bg canvas {
            width: 100% !important;
            height: 100% !important;
        }

        .slide-content {
            position: relative; z-index: 3; /* Above Three.js canvas */
            max-width: 1400px; width: 100%; padding: 0 4vw;
            display: flex; flex-direction: column; justify-content: center; height: 100%;
        }

        /* --- HERO SPECIFIC --- */
        #slide-0 .slide-content {
            align-items: center;
            text-align: center;
        }

        .slide-tag {
            display: inline-block; padding: 0.5rem 1rem; margin-bottom: 2rem;
            border: 1px solid var(--accent-cyan); color: var(--accent-cyan);
            font-family: 'JetBrains Mono', monospace; font-size: 0.8rem; text-transform: uppercase; letter-spacing: 0.2em;
            background: rgba(0, 240, 255, 0.1); backdrop-filter: blur(5px);
        }
        .slide-title {
            font-size: clamp(4rem, 12vw, 11rem); font-weight: 800; margin-bottom: 1rem;
            color: #fff; position: relative; z-index: 2;
        }
        .text-outline { -webkit-text-stroke: 1px rgba(255,255,255,0.3); color: transparent; }
        .slide-desc {
            font-size: 1.25rem; max-width: 600px; color: #a1a1aa; margin-bottom: 3rem; position: relative; z-index: 2;
        }

        /* NEW DASHBOARD CLOCK STYLES */
        .countdown-grid {
            display: grid;
            grid-template-columns: repeat(4, 1fr);
            gap: 1rem;
            margin-bottom: 3rem;
        }
        .countdown-item {
            background: rgba(255,31,75,0.1);
            border: 1px solid var(--accent-red);
            padding: 1rem 1.5rem;
            text-align: center;
            min-width: 100px;
            clip-path: polygon(10% 0, 100% 0, 100% 90%, 90% 100%, 0 100%, 0 10%);
            backdrop-filter: blur(10px);
        }
        .countdown-val {
            display: block;
            font-family: 'Rajdhani', sans-serif;
            font-size: clamp(2.5rem, 4vw, 4rem);
            font-weight: 700;
            color: #fff;
            line-height: 1;
        }
        .countdown-label {
            display: block;
            font-family: 'JetBrains Mono', monospace;
            font-size: 0.8rem;
            color: var(--accent-red);
            margin-top: 0.5rem;
            letter-spacing: 0.2em;
        }

        /* --- STANDINGS UPGRADE --- */
        .standings-wrapper {
            width: 100%; height: 55vh; margin-top: 2rem; position: relative;
        }
        .standings-view {
            position: absolute; inset: 0; width: 100%; height: 100%;
            transition: all 0.5s cubic-bezier(0.4, 0, 0.2, 1);
            opacity: 0; visibility: hidden; transform: translateY(20px);
        }
        .standings-view.active-view {
            opacity: 1; visibility: visible; transform: translateY(0);
        }

        /* Driver Table View */
        .table-scroll { height: 100%; overflow-y: auto; padding-right: 1rem; scrollbar-width: thin; scrollbar-color: var(--accent-red) rgba(255,255,255,0.1); overscroll-behavior: contain; }
        .standings-table { width: 100%; border-collapse: separate; border-spacing: 0 0.5rem; font-family: 'JetBrains Mono', monospace; }
        .standings-table th {
            text-align: left; color: var(--accent-cyan); padding: 1rem;
            position: sticky; top: 0; background: rgba(0,0,0,0.9); /* Updated for black bg */ backdrop-filter: blur(10px); z-index: 10;
            font-family: 'Rajdhani', sans-serif; font-weight: 700; letter-spacing: 0.1em;
        }
        .standings-table td { padding: 1rem; background: rgba(255,255,255,0.03); border: 1px solid transparent; transition: all 0.3s ease; }
        .standings-table tr:hover td { background: rgba(255,31,75,0.1); border-color: var(--accent-red); }
        .standings-table td:first-child { border-radius: 4px 0 0 4px; }
        .standings-table td:last-child { border-radius: 0 4px 4px 0; }
        
        .team-cell { display: flex; align-items: center; gap: 0.8rem; }
        .team-logo-mini { height: 20px; width: auto; max-width: 30px; object-fit: contain; opacity: 0.8; }

        /* Constructor Garage View */
        .garage-grid {
            display: grid; grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 1.5rem; height: 100%; overflow-y: auto; padding-right: 1rem;
            scrollbar-width: thin; scrollbar-color: var(--accent-red) rgba(255,255,255,0.1);
            overscroll-behavior: contain;
            padding-top: 1.5rem; /* FIX: Add top padding to prevent clipping on scroll */
        }
        .constructor-card {
            background: linear-gradient(145deg, rgba(255,255,255,0.05) 0%, rgba(0,0,0,0.2) 100%);
            border: 1px solid rgba(255,255,255,0.1); border-radius: 12px;
            padding: 1.5rem; display: flex; flex-direction: column; position: relative; overflow: visible;
            transition: all 0.3s ease;
        }
        .constructor-card:hover { border-color: var(--accent-cyan); transform: translateY(-5px); }
        .constructor-card::before {
            content: attr(data-rank); position: absolute; top: -1rem; right: 1rem;
            font-size: 8rem; font-family: 'Rajdhani', sans-serif; font-weight: 800;
            color: rgba(255,255,255,0.03); z-index: 0;
        }
        .cc-header { display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; position: relative; z-index: 2; }
        .cc-name { font-family: 'Rajdhani', sans-serif; font-weight: 700; font-size: 1.5rem; }
        .cc-points {
            color: var(--accent-cyan); font-family: 'JetBrains Mono', monospace; font-weight: 700;
            position: relative; cursor: help;
        }
        .cc-points::after {
            content: attr(data-drivers);
            position: absolute; bottom: 100%; right: 0;
            background: var(--accent-red); color: #fff;
            padding: 0.5rem 1rem; border-radius: 4px;
            font-size: 0.8rem; white-space: nowrap;
            opacity: 0; pointer-events: none; transition: all 0.2s ease;
            z-index: 100; box-shadow: 0 5px 15px rgba(0,0,0,0.5);
            font-family: 'Inter', sans-serif; font-weight: 500;
            transform: translateY(5px);
        }
        .cc-points:hover::after { opacity: 1; transform: translateY(-5px); }

        .cc-img-container {
            flex-grow: 1; display: flex; align-items: center; justify-content: center;
            margin: 1rem 0; position: relative; z-index: 1;
        }
        .cc-car-img { width: 100%; height: auto; object-fit: contain; filter: drop-shadow(0 10px 20px rgba(0,0,0,0.5)); transition: transform 0.5s ease; }
        .constructor-card:hover .cc-car-img { transform: scale(1.05) rotate(-2deg); }

        /* Standings Tabs */
        .standings-tabs { display: flex; gap: 1rem; margin-bottom: 1rem; }
        .tab-btn {
            background: transparent; border: 1px solid rgba(255,255,255,0.2); color: rgba(255,255,255,0.5);
            padding: 0.75rem 2rem; font-family: 'Rajdhani', sans-serif; font-weight: 700;
            text-transform: uppercase; letter-spacing: 0.1em; cursor: pointer; transition: all 0.3s ease;
        }
        .tab-btn.active { background: var(--accent-red); color: #fff; border-color: var(--accent-red); box-shadow: 0 0 20px rgba(255,31,75,0.3); }

        /* Other Components */
        .cal-grid {
            display: flex; flex-wrap: wrap; gap: 1rem;
            max-width: 1200px;
            margin-top: 2rem; 
        }
        .cal-item {
            border: 1px solid rgba(255,255,255,0.1); padding: 1.5rem; text-align: center;
            transition: all 0.3s ease; display: flex; flex-direction: column; justify-content: center;
            background: rgba(255,255,255,0.02); opacity: 0.5;
            flex: 1 1 140px;
            min-width: 140px;
        }
        .cal-item.future-race { opacity: 1; }
        .cal-item:hover { border-color: var(--accent-red); background: rgba(255,31,75,0.1); opacity: 1 !important;}
        .cal-item.next-race { opacity: 1; border-color: var(--accent-cyan); background: rgba(0,240,255,0.1); box-shadow: 0 0 30px rgba(0,240,255,0.1); transform: scale(1.05); }

        .contact-grid { display: flex; gap: 2rem; flex-wrap: wrap; margin-top: 2rem; }
        .contact-item {
            display: flex; align-items: center; gap: 1rem; padding: 1.5rem 2rem;
            background: rgba(255,255,255,0.05); border: 1px solid rgba(255,255,255,0.1);
            color: #fff; text-decoration: none; transition: all 0.3s ease;
        }
        .contact-item:hover { background: var(--accent-red); border-color: var(--accent-red); box-shadow: 0 10px 30px -10px var(--accent-red); }
        
        .btn-tech {
            pointer-events: auto; cursor: pointer; display: inline-block; padding: 1rem 3rem;
            background: var(--accent-red); color: #fff; font-family: 'Rajdhani', sans-serif; font-weight: 700;
            text-transform: uppercase; letter-spacing: 0.2em; text-decoration: none; border: none;
            clip-path: polygon(0 0, 100% 0, 95% 100%, 5% 100%); transition: all 0.3s ease;
        }
        .btn-tech:hover { background: #fff; color: var(--bg-main); transform: scale(1.05); box-shadow: 0 0 30px rgba(255,255,255,0.4); }

        @media (max-width: 768px) {
            .countdown-grid { grid-template-columns: repeat(2, 1fr); gap: 0.5rem; }
            .countdown-item { min-width: auto; padding: 0.8rem; }
            .countdown-val { font-size: 2.5rem; }
            .slide-title { font-size: 5rem; }
        }

    </style>
</head>
<body>

    <div class="cinematic-grain"></div>

    <div class="fixed-ui">
        <img src="https://raw.githubusercontent.com/HARISHWINNER/TTRL/ade50d630c482acbb96676fc69c2849a58494f7f/RESOURCES/image.png" alt="TTRL" class="logo">
        <div class="mono-font text-sm uppercase tracking-widest">
            <span style="color: var(--accent-cyan)">Season 1</span> // Live
        </div>
    </div>

    <div class="nav-dots">
        <div class="dot active"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div><div class="dot"></div>
    </div>

    <div class="slides-wrapper">
        <!-- SLIDE 0: HERO WITH COUNTDOWN -->
        <section class="slide active" id="slide-0">
            <div class="slide-bg" style="background-image: url('https://raw.githubusercontent.com/S-HARISH44/TTRL/577532eaacf8de58ca32f2b9e5d0112cf71a3689/RESOURCES/001-EA-Sports-F1-2023-Video-Game-Review.jpg')"></div>
            <div class="slide-content">
                <div class="slide-tag" id="hero-next-tag">NEXT RACE // LOADING...</div>
                <h1 class="slide-title tech-font">TURBO<br><span class="text-outline">TRIBE</span></h1>
                
                <!-- NEW DASHBOARD STYLE COUNTDOWN -->
                <div class="countdown-grid" id="hero-countdown">
                    <div class="countdown-item">
                        <span class="countdown-val" id="cd-days">00</span>
                        <span class="countdown-label">DAYS</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-val" id="cd-hours">00</span>
                        <span class="countdown-label">HRS</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-val" id="cd-minutes">00</span>
                        <span class="countdown-label">MIN</span>
                    </div>
                    <div class="countdown-item">
                        <span class="countdown-val" id="cd-seconds">00</span>
                        <span class="countdown-label">SEC</span>
                    </div>
                </div>
                
                <p class="slide-desc">Experience the pinnacle of F1 25 sim racing. Elite competition, precision driving, and a community like no other.</p>
                <div class="btn-container"><button id="start-engine-btn" class="btn-tech">ENTER PADDOCK</button></div>
            </div>
        </section>

        <!-- SLIDE 1: CALENDAR -->
        <section class="slide" id="slide-1">
            <div class="slide-bg" style="background-image: url('https://raw.githubusercontent.com/S-HARISH44/TTRL/577532eaacf8de58ca32f2b9e5d0112cf71a3689/RESOURCES/Belgium.avif')"></div>
            <div class="slide-content">
                <div class="slide-tag">02 // GLOBAL TOUR</div>
                <h2 class="slide-title tech-font">RACE<br><span class="text-outline">CALENDAR</span></h2>
                <div id="calendar-grid" class="cal-grid mono-font"></div>
            </div>
        </section>

        <!-- SLIDE 2: STANDINGS -->
        <section class="slide" id="slide-2">
            <div class="slide-bg" style="background-image: url('https://f1chronicle.com/wp-content/uploads/2024/01/SI202412010400-1920x1080.jpg')"></div>
            <div class="slide-content">
                <div class="slide-tag">03 // LEADERBOARD</div>
                <h2 class="slide-title tech-font">TOP<br><span class="text-outline">PERFORMERS</span></h2>
                <div class="standings-tabs">
                    <button class="tab-btn active" data-tab="drivers">DRIVERS</button>
                    <button class="tab-btn" data-tab="constructors">TEAMS</button>
                </div>
                <div class="standings-wrapper">
                    <div class="standings-view active-view" id="view-drivers">
                         <div class="table-scroll">
                            <table class="standings-table">
                                <thead><tr><th>POS</th><th>DRIVER</th><th>TEAM</th><th>PTS</th></tr></thead>
                                <tbody id="drivers-body"></tbody>
                            </table>
                        </div>
                    </div>
                    <div class="standings-view" id="view-constructors">
                        <div class="garage-grid" id="garage-grid"></div>
                    </div>
                </div>
            </div>
        </section>

        <!-- SLIDE 3: REGISTER -->
        <section class="slide" id="slide-3">
            <div class="slide-bg" style="background-image: url('https://raw.githubusercontent.com/S-HARISH44/TTRL/577532eaacf8de58ca32f2b9e5d0112cf71a3689/RESOURCES/1-w-GettyImages-2048270135.webp')"></div>
            <div class="slide-content">
                <div class="slide-tag">04 // ENLIST</div>
                <h2 class="slide-title tech-font">JOIN<br><span class="text-outline">THE GRID</span></h2>
                <p class="slide-desc">Seats are limited for Season 2. Secure your place in the most competitive league on the platform.</p>
                <div class="btn-container"><a href="https://docs.google.com/forms/d/e/1FAIpQLSc1xE8SkAOIKoHaryLjNgTNXJfmBCSv73vdgxaAA0_uxnmUTw/viewform" target="_blank" class="btn-tech">REGISTER NOW</a></div>
            </div>
        </section>

         <!-- SLIDE 4: CONTACT -->
        <section class="slide" id="slide-4">
            <!-- VANTA BACKGROUND -->
            <div class="slide-bg" id="vanta-bg"></div>
            <div class="slide-content">
                <div class="slide-tag">05 // PADDOCK</div>
                <h2 class="slide-title tech-font">CONNECT<br><span class="text-outline">WITH US</span></h2>
                <p class="slide-desc">Join our Discord server for live race updates.</p>
                <div class="contact-grid mono-font">
                    <a href="https://discord.gg/EuyPTXqbg6" target="_blank" class="contact-item"><i class="fa-brands fa-discord"></i> <span>DISCORD</span></a>
                    <a href="https://www.youtube.com/@TurboTribeRacingLeague" target="_blank" class="contact-item"><i class="fa-brands fa-youtube"></i> <span>YOUTUBE</span></a>
                    <a href="mailto:turbotriberacingleague@gmail.com" class="contact-item"><i class="fa-solid fa-envelope"></i> <span>EMAIL</span></a>
                </div>
            </div>
        </section>
    </div>

    <!-- REQUIRED LIBRARIES -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/three.js/r134/three.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/Observer.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/vanta/0.5.24/vanta.net.min.js"></script>

    <script>
        gsap.registerPlugin(Observer);

        // --- ASSETS ---
        const teamLogoMap = { "FERRARI": "https://raw.githubusercontent.com/S-HARISH44/TTRL-RESOURCES/d4faca0970a4d20419af0e364a9e1aebb9af0fe0/LOGOS/ferrari.png", "WILLIAMS": "https://raw.githubusercontent.com/S-HARISH44/TTRL-RESOURCES/d4faca0970a4d20419af0e364a9e1aebb9af0fe0/LOGOS/williams.png", "ALPINE": "https://raw.githubusercontent.com/S-HARISH44/TTRL-RESOURCES/d4faca0970a4d20419af0e364a9e1aebb9af0fe0/LOGOS/alpine.png", "HAAS": "https_//raw.githubusercontent.com/S-HARISH44/TTRL-RESOURCES/d4faca0970a4d20419af0e364a9e1aebb9af0fe0/LOGOS/haas.png", "MCLAREN": "https://raw.githubusercontent.com/S-HARISH44/TTRL-RESOURCES/d4faca0970a4d20419af0e364a9e1aebb9af0fe0/LOGOS/mclaren.png", "KICK SAUBER": "https://raw.githubusercontent.com/S-HARISH44/TTRL-RESOURCES/d4faca0970a4d20419af0e364a9e1aebb9af0fe0/LOGOS/kick_sauber.png", "ASTON MARTIN": "https://raw.githubusercontent.com/S-HARISH44/TTRL-RESOURCES/d4faca0970a4d20419af0e364a9e1aebb9af0fe0/LOGOS/martin.png", "RACING BULLS": "https://raw.githubusercontent.com/S-HARISH44/TTRL-RESOURCES/d4faca0970a4d20419af0e364a9e1aebb9af0fe0/LOGOS/vcarb.png", "MERCEDES": "https://raw.githubusercontent.com/S-HARISH44/TTRL-RESOURCES/d4faca0970a4d20419af0e364a9e1aebb9af0fe0/LOGOS/mercedes.png", "RED BULL RACING": "https://raw.githubusercontent.com/S-HARISH44/TTRL-RESOURCES/d4faca0970a4d20419af0e364a9e1aebb9af0fe0/LOGOS/redbull.png" };
        const teamCarMap = { "FERRARI": "https://raw.githubusercontent.com/S-HARISH44/TTRL/81a0eb55cacfee2f08a1b599ecd314608b6b0424/RESOURCES/Constructor/2025ferraricarright.png", "WILLIAMS": "https://raw.githubusercontent.com/S-HARISH44/TTRL/81a0eb55cacfee2f08a1b599ecd314608b6b0424/RESOURCES/Constructor/2025williamscarright.png", "ALPINE": "https://raw.githubusercontent.com/S-HARISH44/TTRL/81a0eb55cacfee2f08a1b599ecd314608b6b0424/RESOURCES/Constructor/2025alpinecarright.png", "HAAS": "https://raw.githubusercontent.com/S-HARISH44/TTRL/81a0eb55cacfee2f08a1b599ecd314608b6b0424/RESOURCES/Constructor/2025haasf1teamcarright.png", "ASTON MARTIN": "https://raw.githubusercontent.com/S-HARISH44/TTRL/81a0eb55cacfee2f08a1b599ecd314608b6b0424/RESOURCES/Constructor/2025astonmartincarright.png", "KICK SAUBER": "https://raw.githubusercontent.com/S-HARISH44/TTRL/81a0eb55cacfee2f08a1b599ecd314608b6b0424/RESOURCES/Constructor/2025kicksaubercarright.png", "MCLAREN": "httpsGallery/S-HARISH44/TTRL/81a0eb55cacfee2f08a1b599ecd314608b6b0424/RESOURCES/Constructor/2025mclarencarright.png", "RED BULL RACING": "https://raw.githubusercontent.com/S-HARISH44/TTRL/81a0eb55cacfee2f08a1b599ecd314608b6b0424/RESOURCES/Constructor/2025redbullracingcarright.png", "RACING BULLS": "https://raw.githubusercontent.com/S-HARISH44/TTRL/81a0eb55cacfee2f08a1b599ecd314608b6b0424/RESOURCES/Constructor/2025racingbullscarright.png", "MERCEDES": "https://raw.githubusercontent.com/S-HARISH44/TTRL/81a0eb55cacfee2f08a1b599ecd314608b6b0424/RESOURCES/Constructor/2025mercedescarright.png" };

        // --- DATA ---
        // Updated years to 2025 for realistic syncing based on today's date (Nov 9, 2025)
        const leagueCalendar = [
            { round: 1, gp: "BAHRAIN", date: "19/09/2025" },
            { round: 2, gp: "AUSTRALIA", date: "26/09/2025" },
            { round: 3, gp: "IMOLA", date: "03/10/2025" },
            { round: 4, gp: "SPAIN", date: "10/10/2025" },
            { round: 5, gp: "BRITAIN", date: "24/10/2025" },
            { round: 6, gp: "LAS VEGAS", date: "31/10/2025" },
            { round: 7, gp: "BELGIUM", date: "07/11/2025" },
            { round: 8, gp: "AUSTRIA", date: "14/11/2025" },
            { round: 9, gp: "BRAZIL", date: "21/11/2025" },
            { round: 10, gp: "ABU DHABI", date: "28/11/2025" }
        ];
        // Points *after* Belgium GP
        const driverData = [ 
            { driver: "SIMMAN", team: "FERRARI", points: 136 }, 
            { driver: "WI7ARD", team: "WILLIAMS", points: 124 }, 
            { driver: "THEGODFATHER", team: "ALPINE", points: 68 }, 
            { driver: "HARISH", team: "HAAS", points: 58 }, 
            { driver: "VIBIN", team: "ASTON MARTIN", points: 48 },
            { driver: "APEXENTROPY", team: "ALPINE", points: 45 }, 
            { driver: "OVERLOAD", team: "MCLAREN", points: 34 }, 
            { driver: "KENTUCKY", team: "HAAS", points: 33 }, 
            { driver: "MAHESH", team: "WILLIAMS", points: 27 }, 
            { driver: "APURRV", team: "ASTON MARTIN", points: 21 },
            { driver: "OXYGEN", team: "KICK SAUBER", points: 18 }, 
            { driver: "MEMB", team: "MERCEDES", points: 18 }, 
            { driver: "BOPEDOPE", team: "MCLAREN", points: 12 }, 
            { driver: "CLONE", team: "RACING BULLS", points: 8 }, 
            { driver: "DENJI", team: "RED BULL RACING", points: 4 }, 
            { driver: "MAAYAONE", team: "MERCEDES", points: 0 }, 
            { driver: "BALA", team: "KICK SAUBER", points: 0 }, 
            { driver: "DINO", team: "FERRARI", points: 0 }, 
            { driver: "SPARTAN GAMER", team: "RACING BULLS", points: 0 }, 
            { driver: "HARRYBECKHAM", team: "RED BULL RACING", points: 0 } 
        ];

        function getConstructorData() {
            const teamMap = {};
            driverData.forEach(d => { 
                if (!teamMap[d.team]) teamMap[d.team] = { points: 0, drivers: [] };
                teamMap[d.team].points += d.points;
                teamMap[d.team].drivers.push(d.driver);
            });
            if (teamMap['RACING BULLS']) {
                teamMap['RACING BULLS'].points += 1;
                teamMap['RACING BULLS'].drivers.push("+1 Prev. Driver");
            }
            return Object.entries(teamMap).map(([team, data]) => ({ team, points: data.points, drivers: data.drivers.join(', ') })).sort((a, b) => b.points - a.points);
        }

        // SYNCED CALENDAR POPULATION
        function populateCalendar() {
            const now = new Date(); // Using browser's current date
            const RACE_TIME = { hours: 17, minutes: 0 }; // Assume 17:00 UTC race time

            document.getElementById('calendar-grid').innerHTML = leagueCalendar.map(r => {
                const [d, m, y] = r.date.split('/').map(Number);
                const raceDate = new Date(Date.UTC(y, m - 1, d, RACE_TIME.hours, RACE_TIME.minutes));
                
                let statusClass = '';
                let statusText = 'RD ' + String(r.round).padStart(2, '0');

                if (raceDate < now) {
                     // Past race
                     statusClass = ''; // Default is faded
                } else {
                    // Future race
                     statusClass = 'future-race';
                     // Check if it's the *very next* race
                     const isNext = !leagueCalendar.some(prev => {
                        const [pd, pm, py] = prev.date.split('/').map(Number);
                        const prevDate = new Date(Date.UTC(py, pm - 1, pd, RACE_TIME.hours, RACE_TIME.minutes));
                        return prevDate > now && prevDate < raceDate;
                     });

                     if (isNext) {
                         statusClass = 'next-race';
                         statusText = 'NEXT UP';
                     }
                }

                return `<div class="cal-item ${statusClass}"><span class="round">${statusText}</span><span class="gp">${r.gp}</span><span class="date">${r.date.slice(0, 5)}</span></div>`
            }).join('');
        }
        
        function populateDrivers() {
             document.getElementById('drivers-body').innerHTML = [...driverData].sort((a,b)=>b.points-a.points).map((d,i) => `<tr><td style="color:${i<3?['#FFD700','#C0C0C0','#CD7F32'][i]:'inherit'}">${String(i+1).padStart(2,'0')}</td><td style="font-weight:700;color:#fff">${d.driver}</td><td class="team-cell"><img src="${teamLogoMap[d.team] || ''}" class="team-logo-mini" alt="${d.team}"> ${d.team}</td><td style="color:var(--accent-cyan);font-weight:700">${d.points}</td></tr>`).join('');
        }

        function populateGarage() {
            document.getElementById('garage-grid').innerHTML = getConstructorData().map((c,i) => `<div class="constructor-card" data-rank="${String(i+1).padStart(2,'0')}"><div class="cc-header"><span class="cc-name">${c.team}</span><span class="cc-points" data-drivers="${c.drivers}">${c.points} PTS</span></div><div class="cc-img-container"><img src="${teamCarMap[c.team] || 'https://placehold.co/300x100?text=Car'}" class="cc-car-img" alt="${c.team} Car"></div></div>`).join('');
        }

        // REAL-TIME SYNCED COUNTDOWN
        function initSyncedCountdown() {
            const now = new Date(); // Using browser's current date
            const RACE_TIME = { hours: 17, minutes: 0 };
            let nextRace = null;

            // Find next race
            for (const race of leagueCalendar) {
                const [d, m, y] = race.date.split('/').map(Number);
                const raceDate = new Date(Date.UTC(y, m - 1, d, RACE_TIME.hours, RACE_TIME.minutes));
                if (raceDate > now) {
                    nextRace = { ...race, raceDate };
                    break;
                }
            }

            const nextTagEl = document.getElementById('hero-next-tag');
            // Clock Elements
            const daysEl = document.getElementById('cd-days');
            const hoursEl = document.getElementById('cd-hours');
            const minutesEl = document.getElementById('cd-minutes');
            const secondsEl = document.getElementById('cd-seconds');

            if (!nextRace) {
                nextTagEl.textContent = "SEASON COMPLETED";
                daysEl.textContent = "00";
                return;
            }
            
            // Set next race label based on calendar
            nextTagEl.textContent = `NEXT RACE // ${nextRace.gp}`;

            function updateTimer() {
                const currentTime = new Date().getTime();
                const distance = nextRace.raceDate.getTime() - currentTime;

                if (distance < 0) {
                    daysEl.textContent = "GO";
                    hoursEl.textContent = "GO";
                    minutesEl.textContent = "GO";
                    secondsEl.textContent = "GO";
                    return;
                }

                daysEl.textContent = String(Math.floor(distance / (1000 * 60 * 60 * 24))).padStart(2, '0');
                hoursEl.textContent = String(Math.floor((distance % (1000 * 60 * 60 * 24)) / (1000 * 60 * 60))).padStart(2, '0');
                minutesEl.textContent = String(Math.floor((distance % (1000 * 60 * 60)) / (1000 * 60))).padStart(2, '0');
                secondsEl.textContent = String(Math.floor((distance % (1000 * 60)) / 1000)).padStart(2, '0');
            }

            updateTimer(); // Immediate call
            setInterval(updateTimer, 1000);
        }

        // --- ANIMATION ENGINE ---
        const slides = document.querySelectorAll('.slide');
        const dots = document.querySelectorAll('.dot');
        const totalSlides = slides.length;
        let currentIndex = 0;
        let isAnimating = false;

        function splitText(selector) {
            document.querySelectorAll(selector).forEach(e => {
                e.innerHTML = e.innerText.split('').map(c => `<span class="char" style="opacity:0">${c===' '?'&nbsp;':c}</span>`).join('');
            });
        }

        // Init
        populateCalendar();
        populateDrivers();
        populateGarage();
        initSyncedCountdown(); // START SYNCED TIMER
        splitText('.slide-title');
        gsap.set('#slide-0 .char', { opacity: 1 });
        gsap.set('#slide-0 .slide-tag, #slide-0 .slide-desc, #slide-0 .btn-container, #slide-0 .hero-countdown', { opacity: 1, y: 0 });

        // INIT VANTA (Switch to NET for stability as TOPOLOGY depends on P5 which causes issues here)
        VANTA.NET({
            el: "#vanta-bg",
            mouseControls: true,
            touchControls: true,
            gyroControls: false,
            minHeight: 200.00,
            minWidth: 200.00,
            scale: 1.00,
            scaleMobile: 1.00,
            color: 0x00f0ff,
            backgroundColor: 0x000000, // UPDATED to pure black
            points: 10.00,
            maxDistance: 25.00,
            spacing: 20.00
        });

        function gotoSlide(index, direction) {
            if (isAnimating) return;
            isAnimating = true;
            let nextIndex = gsap.utils.wrap(0, totalSlides, index);
            const currentSlide = slides[currentIndex];
            const nextSlide = slides[nextIndex];
            
            dots[currentIndex].classList.remove('active');
            dots[nextIndex].classList.add('active');

            // NEW: CROSSFADE LOGIC
            gsap.set(nextSlide, { zIndex: 20, visibility: 'visible', opacity: 0 });
            gsap.set(nextSlide.querySelectorAll('.char'), { y: 0, opacity: 0 }); // y: 0, no direction
            gsap.set(nextSlide.querySelectorAll('.slide-tag, .slide-desc, .btn-container, .cal-grid, .standings-wrapper, .contact-grid, .standings-tabs, .hero-countdown'), { y: 0, opacity: 0 }); // y: 0, no direction
            
            const tl = gsap.timeline({
                defaults: { ease: "power2.inOut", duration: 1.0 }, // Faster, cleaner fade
                onComplete: () => {
                    gsap.set(currentSlide, { visibility: 'hidden', zIndex: 1, opacity: 0 }); // Reset old slide
                    currentIndex = nextIndex;
                    isAnimating = false;
                }
            });

            tl.to(currentSlide, { opacity: 0 }, 0);
            tl.to(nextSlide, { opacity: 1 }, 0.2); // Overlap for smoother transition
            
            // Background still animates for depth
            gsap.fromTo(nextSlide.querySelector('.slide-bg'), { scale: 1.2 }, { scale: 1.1, duration: 1.4, ease: "power2.out" }, 0);
            
            // Content still staggers in
            tl.to(nextSlide.querySelectorAll('.char'), { y: 0, opacity: 1, stagger: { each: 0.025, from: "start" }, duration: 0.8, ease: "back.out(1.5)" }, 0.4);
            tl.to(nextSlide.querySelectorAll('.slide-tag, .slide-desc, .btn-container, .cal-grid, .standings-wrapper, .contact-grid, .standings-tabs, .hero-countdown'), { opacity: 1, y: 0, duration: 0.8, ease: "power3.out" }, 0.6);
        }

        // Main Page Observer
        Observer.create({
            target: window,
            type: "wheel,touch,pointer",
            wheelSpeed: -1,
            tolerance: 10,
            preventDefault: true,
            onDown: (self) => {
                 // Ignore if interaction started inside a scrollable container
                if (self.event.target.closest('.table-scroll') || self.event.target.closest('.garage-grid')) return;
                if (!isAnimating) gotoSlide(currentIndex - 1, -1);
            },
            onUp: (self) => {
                 // Ignore if interaction started inside a scrollable container
                if (self.event.target.closest('.table-scroll') || self.event.target.closest('.garage-grid')) return;
                if (!isAnimating) gotoSlide(currentIndex + 1, 1);
            }
        });
        
        // Scroll Trap for inner containers with boundary detection
        function trapScroll(element) {
             Observer.create({
                target: element,
                type: "wheel,touch,pointer",
                wheelSpeed: -1,
                tolerance: 10,
                preventDefault: true, // Always prevent default to stop main page scroll
                onDown: (self) => {
                    // Scrolling UP (dragging down)
                    if (element.scrollTop > 0) {
                        // Allow internal scroll
                         element.scrollTop -= Math.abs(self.deltaY); 
                    } else {
                        // Boundary reached, trigger page transition
                        if (!isAnimating) gotoSlide(currentIndex - 1, -1);
                    }
                },
                onUp: (self) => {
                    // Scrolling DOWN (dragging up)
                    // Use a small buffer (e.g., 2px) to handle potential rounding errors in scrollHeight
                    if (element.scrollTop + element.clientHeight < element.scrollHeight - 2) {
                         // Allow internal scroll
                         element.scrollTop += Math.abs(self.deltaY);
                    } else {
                         // Boundary reached, trigger page transition
                         if (!isAnimating) gotoSlide(currentIndex + 1, 1);
                    }
                }
            });
        }
        trapScroll(document.querySelector('.table-scroll'));
        trapScroll(document.querySelector('.garage-grid'));


        dots.forEach((dot, i) => { dot.addEventListener('click', () => { if (i !== currentIndex && !isAnimating) gotoSlide(i, i > currentIndex ? 1 : -1); }); });
        document.getElementById('start-engine-btn').addEventListener('click', () => { if (!isAnimating) gotoSlide(1, 1); });

        document.querySelectorAll('.tab-btn').forEach(btn => {
            btn.addEventListener('click', (e) => {
                const targetTab = e.target.dataset.tab;
                if (document.querySelector('.tab-btn.active').dataset.tab === targetTab) return;
                document.querySelectorAll('.tab-btn').forEach(b => b.classList.remove('active'));
                e.target.classList.add('active');
                const dView = document.getElementById('view-drivers'), cView = document.getElementById('view-constructors');
                if (targetTab === 'constructors') { dView.classList.remove('active-view'); cView.classList.add('active-view'); }
                else { cView.classList.remove('active-view'); dView.classList.add('active-view'); }
            });
        });

    </script>
</body>
</html>
